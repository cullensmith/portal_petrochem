<body>
    <div class="container" >
        <header style="display: flex; justify-content: space-between; margin-left: -10px; padding: 10px 20px;">
            <div style="display: flex; align-items: center;">
                <a href="https://www.fractracker.org/" target="_blank" style="text-decoration: none;">
                    <img class="header-image" style="font-family:Archivo Black; margin-top:10px; height:90px; width:90px; position: relative; z-index: 5100;" src="/static/images/ft2021_logo_icon_dark_blue_med.png">
                </a>
                <h1 style="font-family:Archivo Black; margin-top:4px; margin-left: 20px; color:#02253a; line-height:1; font-size:45px;">
                    Petrochemical<br>Data Portal
                </h1>
            </div>
        
            <div style="display: flex; gap: 10px;margin: 16px 10px">
                <button onclick="openSplash()"
                        style="font-family: 'Archivo Black'; background-color: #02253a; color: white; border: none; padding: 10px 22px; border-radius: 5px; cursor: pointer;">
                    About&nbsp;&nbsp;❯
                </button>
                <a href="https://www.fractracker.org/data/" target="_blank" style="text-decoration: none;">
                    <button style="font-family: 'Archivo Black'; background-color: #ffc857; color: #02253a; border: none; padding: 16px 22px; border-radius: 5px; cursor: pointer;">
                      More Data&nbsp;&nbsp;❯
                    </button>
                </a>
            </div>
        </header>

        <div class="main-content">
            <div class="left" style="margin-top:0">
                <div id="tabbtns" style="display:grid;grid-template-columns: 40% 60%;height: 5vh">
                    <button class="tabbtn sel" id="resultsbtn" style="border-top-left-radius:20px;margin-left:-12px;font-family:arial">Facility<br>Data</button>
                    <button class="tabbtn " id="filterbtn" style="border-top-right-radius:20px;margin-right:-12px;font-family:arial">Summary of<br>Demographics</button>
                </div>

                <div class=" tabpanel hide" id="filterpanel" style="color:white"> {% comment %} class was class="catgrid tabpanel" {% endcomment %}
                    <div id="attributes-box" style="position: relative; padding: 10px; margin-top: 40px; border-radius: 5px;">
                        {% comment %} <h3>Demographics of the population within </h3> {% endcomment %}
                        <p>Load a layer onto the map and click a feature in the map to see the population demographics within 1km of your facility.</p>
                    </div>
                </div>
                <div class="tabpanel " id="filterpanel2"  style="display:none">

                    <div class="filter toggle-wellstatus hide" style="display:none">
                        <h4 class="fh4" id="wellstatush4" onclick="toggleFilter('wellstatus')">WELL STATUS</h4>
                        <div class="filter-content wellstatus-content" id="statusContainer">
                            <div class="selectionContainer" id="statusPicks" style="max-height:14vh">Status varies from state to state, take a look at the reference below.</div>
                            <button class="dropdownbutton notyet" id="statusbutton" onclick="openlist('wellstatus')">Well Status<br></button>
                            <div class="button-container" id="status-container"></div>
                        </div>
                    </div>
                    <div class="filter toggle-welltype hide" style="display:none">
                        <h4 class="fh4" id="welltypeh4" onclick="toggleFilter('welltype')">WELL TYPE</h4>
                        <div class="filter-content welltype-content" id="typeContainer">
                            <div class="selectionContainer" id="typePicks" style="max-height:14vh">Type varies from state to state, take a look at the reference below.</div>
                            <button class="dropdownbutton notyet" id="typebutton" onclick="openlist('welltype')">Types Available<br></button>
                            <div class="button-container" id="type-container"></div>
                        </div>
                    </div>

                    <div class="filter toggle-ftacat hide" style="display:none">
                        <h4 class="fh4" id="ftacath4" onclick="toggleFilter('ftacat')">FRACTRACKER CATEGORY</h4>
                        <div class="filter-content ftacat-content" id="ftacatContainer">
                            <div class="selectionContainer" id="ftacatPicks" style="max-height:14vh">Our attempt to normalize the varying classifications across the country. </div>
                            <button class="dropdownbutton notyet" id="ftacatbutton" onclick="openlist('welltype')">General Classification<br></button>
                            <div class="button-container" id="ftacat-container"></div>
                        </div>
                    </div>

                </div>
                <div class="tabpanel hide" id="loadingpanel">
                    <div class="loadingobjects">
                        <div id="loadingtext" style="font-weight:bold;margin-top:60px;margin-bottom:20px">
                            Retrieving your records
                        </div>
                        <div id="spinnerid" class="loader" style="margin:auto"></div>
                    </div>
                </div>
                <div class="tabpanel " id="resultspanel">
                    <div id="postapply"  style="margin-top:30px">
                        <div class="refine" id="refineblock">
                            <div class="filter" style="cursor: default;">  {% comment %} toggle-states show"> {% endcomment %} 
                                <h4 class="fh4 show" style="cursor: default;font-family:Archivo;color:white;background-color:#02253a;padding-left:12px;padding-bottom:0px" id="statesh4" onclick="toggleFilter('states')">Select Data</h4>
                                <div class="filter-content states-content show" id="filterState" style="background-color:#02253a">
                                    {% comment %} <label for="stateinputbox" style="display:block;padding-bottom: 5px;"></label> {% endcomment %}
                                    <div class="selectionContainer" style="display:none;justify-content:center" id="datasetSelection"></div>
                                    <button class="dropdownbutton" id="statebutton" style="border-radius:6px;align-content:center" onclick="openlist('state')">Select</button>
                                    <div class="button-container" id="state-container" style="border-top-left-radius:10px;border-top-right-radius:10px;border-top-left-radius:10px;border:4px solid #a3cf5f"></div>
                                    <div style="display: flex; align-items: center; justify-content: flex-start; gap: 8px; margin-top: 5px;">
                                        <input type="checkbox" id="addtomap" style="transform: scale(1.04);accent-color:#ffc857;">
                                        <label for="addtomap" style="color:white; position: relative; top: 2px;left:-6px">Add to the map</label>
                                      </div>
                                </div>
                            </div>
                            <div class="filter toggle-counties hide" style="display:none">
                                <h4 class="fh4" id="countiesh4" onclick="toggleFilter('counties')">COUNTY</h4>
                                <div class="filter-content counties-content hide" id="ctyFilterContainer">
                                    <div class="selectionContainer" id="countyPicks" style="max-height:14vh">You can limit your results to those within a specific county by clicking the corresponding button below.</div>
                                    <button class="dropdownbutton notyet" id="countybutton" onclick="openlist('county')">Counties by State<br></button>
                                    <div class="button-container" id="county-container"></div>
                                </div>
                            </div>

                            <div id="search" style="margin-top:15px;color:white">
                                <label style="font-family:Archivo;"><b>Filter</b></label>
                                <select id="sort-field2" style="border-radius:6px;cursor:pointer;text-align:center;padding: 5px;margin-top:10px;margin-bottom:14px" class="dropdownbutton">
                                    <option value=""style="color:#8a8a8a" selected>Select</option> <!-- Placeholder option -->
                                </select>
                                {% comment %} <div style="display:grid;grid-template-columns:84% 16%;width:100%"> {% endcomment %}
                                <div>
                                    <div class="tool2tip-target" style="z-index:50000;text-align:center;border:none;height:25px;background-color:#0287D4;border-radius:4px"><input id="srch-input1" placeholder="Refine by keyword..." style="text-indent:5px;border:none;border-radius:4px;height:25px;width:100%"></input></div>
                                    {% comment %} <input style="width:120px;text-align: right;" type="number" id="sort-input" placeholder="Jump to page #" min="1"> {% endcomment %}
                                    {% comment %} <div style="justify-self:right;text-align:center;border:none;height:25px;background-color:white;border-radius:7px"><button id="sortbtn2" class="divbtns" onclick="refinefilter()">Go</button></div> {% endcomment %}
                                </div>    
                                <div style="display: flex; gap: 5px; align-items: center;margin-top:5px">
                                    <div style="text-align: center; border: solid; height: 25px; background-color: #02253a; border-color:white;border-width:1px;border-radius: 7px;width:50%">

                                    {% comment %} <div style="text-align: center; border: none; height: 25px; background-color: white; border-radius: 7px;width:50%"> {% endcomment %}
                                        <button class="divbtns" style="background-color:transparent;border-color:#02253a;color:white" onclick="clearFilter()">Reset</button>
                                    </div>
                                    <div style="text-align: center; border: none; height: 25px; background-color: white; border-radius: 7px;width:50%">

                                    {% comment %} <div style="text-align: center; border: solid; height: 25px; background-color: #00253B; border-color:red;border-width:2px;border-radius: 7px;width:50%"> {% endcomment %}
                                        <button id="sortbtn2" class="divbtns" onclick="refinefilter()">Search</button>
                                    </div>

                                </div>

                            </div>
                            <button onclick="window.print()">🖨️ Print Map</button>
                            <div class="dlbtn" style="position: absolute; bottom: 10px; left: 10px; right: 10px;">
                                <button class="divbtns" id="dlbutton" style="font-family: 'Archivo Black'; font-size:18px;height: 60px; display: block; background-color: #ffc857;" onclick="downloadTableData(thetabledata)">
                                    Download
                                    <span style="font-size: 20px; display: inline-block; transform: rotate(270deg); margin-left: 8px;">&#8676;</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="right" id="container" style="min-width:650px">
                <!-- Top content of the right side -->
                <div id="map" style="border-top-left-radius: 20px;">
                    {% comment %} <img class="header-image" style="height: 60px;position: absolute; right: 10px;z-index: 5100;" src="/static/images/ft2021_logo_icon dark_blue.png"> {% endcomment %}

                    <div class="legend" id="legend" style="width:auto;overflow:auto;max-height:calc(100% - 30px)">
                        <div class="legend-header" id="legend-toggle">
                            <div  style="justify-self:left">
                                <span id="legend_arrow">x</span>
                            </div>
                            <div style="justify-self:center">
                                <span>Map Layers</span>
                            </div>
                        </div>
                        <div class="legend-scrollable">
                            <div class="legend-content">
                                <div id="custom-tooltip" class="tooltip">Coming Soon!</div>
                                <div id="custom-tool2tip" class="tool2tip">Try using &nbsp;&nbsp;*<br> as a wildcard.</div>
                                <div style="display: flex; justify-content: center; cursor: default;">
                                    <p style="margin-bottom: 5px; margin-left: 10px; cursor: default;">
                                      Available Data
                                      <button 
                                        onclick="openDD()" 
                                        id="info-btn" 
                                        style="
                                          margin-left: 4px; 
                                          padding: 2px 6px; 
                                          font-size: 12px; 
                                          cursor: pointer; 
                                          border: none; 
                                          background-color: transparent;
                                        "
                                      >
                                        <i class="fas fa-info-circle"></i>
                                      </button>
                                    </p>
                                  </div>
                                <p style="margin-bottom:5px;margin-top:10px"><strong>Market Hubs, Ports, Terminals</strong></p>
                                <div class="legenditem " id="legenditemid_58"><label class="category1 " id="legenditemid_68"><span class="legend-diamond" style="background: #000000; margin-right:5px;"></span><input type="checkbox" id="eia_terminal_crudeoil" class=""  unchecked> Crude Oil (Terminal)</label></div>
                                {% comment %} <div class="legenditem tooltip-target" id="legenditemid_11"><label class="category1 dim " id="legenditemid_21"><span style ="color:#de02d3;font-weight:bold;position:relative; top: -8px;margin-right:5px">_</span><input type="checkbox" id="pipeline_fractracker" class="dim"  unchecked> FracTracker Digitized</label></div> {% endcomment %}
                                <div <span style ="color:white;font-weight:bold;position:relative; top: -8px;margin-right:5px">_</span><p type="checkbox" id="pipeline_fractracker" class="dim"  > </p></label></div>

                                {% comment %} <div class="legenditem " id="legenditemid17"><label class="category1 dim" id="legenditemid27"><input type="checkbox" id="countylayer" class="dim"  unchecked> County Borders</label></div>
                                <div class="legenditem " id="legenditemid18"><label class="category1 dim" id="legenditemid28"><input type="checkbox" id="countycount" class="dim"  unchecked> County Counts</label></div>
                                <div class="legenditem " id="legenditemid19"><label class="category1 dim" id="legenditemid29"><input type="checkbox" id="countychoropleth" class="dim"  unchecked> County Choropleth</label></div> {% endcomment %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="divider" id="dividerContainer" style="z-index: 1000;margin-top:-12px">
                    <div>
                        <div style="padding:9px;display:grid;grid-auto-flow:column;">
                            <div>
                                <div>
                                    <input style="border:none;width:148px;text-align:center;height:25px;background-color:white;border-radius:7px" type="number" id="page-input" placeholder="Jump to page #" min="1">
                                    <button class="divbtns" onclick="goToPage()">Go</button>
                                </div>

                                {% comment %} <div class="pagenav-container" style="justify-self:center">
                                    <span id="pagination" style="justify-self: center"></span>
                                </div> {% endcomment %}
                            </div>
                            <div style="color:white;margin-top:2px;justify-self:center">
                                <span id="tabledataset"></span>
                            </div> 
                            <div style="justify-self:right">
                                <!-- Dropdown with a placeholder-like option for "Sort by" -->
                                <select id="sort-field" style="text-align:center;border:none;height:25px;background-color:white;border-radius:7px">
                                </select>
                                {% comment %} <input style="width:120px;text-align: right;" type="number" id="sort-input" placeholder="Jump to page #" min="1"> {% endcomment %}
                                <button id="sortbtn" class="divbtns" onclick="sortTable()">Sort</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bottom" id="bottomContainer" style="margin-top:-4px;background-color:#02253a;border:4px solid #02253a;margin-bottom:5px;border-bottom-left-radius:18px;border-bottom-right-radius:18px;">
                <!-- Bottom content of the right side -->
                <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
                    <!-- Left-aligned -->
                    <div id="pagination" style="flex: 1; text-align: left;">
                        <!-- Pagination controls go here -->
                    </div>
                
                    <!-- Centered -->
                    <div style="flex: 1; text-align: center; color: white; margin-top: 2px;">
                        <span id="records"></span>
                    </div>
                    <!-- Optional: Right-aligned space filler -->
                    <div style="flex: 1;"></div>
                </div>
                    <div class="tablecontainer">
                        <!-- Grid container for the table -->
                        <table id="maintable">
                            <thead id="maintableheader" class="sticky-header-container">
                            </thead>
                            <tbody id="maintablebody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        {% comment %} <div style="display: flex; justify-content: right; gap: 20px;margin-bottom:5px;margin-right:5px">
            <a href="https://www.fractracker.org/" target="_blank">
                <img class="header-image"
                     style="font-family:Archivo Black; margin-top:10px; height:40px; width:160px; position: relative; z-index: 5100;"
                     src="/static/images/fraccloseSplashtrackerlogodark.png"
                     alt="Beyond Petrochemicals">
            </a>
            <a href="https://www.beyondpetrochemicals.org/" target="_blank">
                <img class="header-image"
                     style="font-family:Archivo Black; margin-top:10px; height:40px; width:160px; position: relative; z-index: 5100;"
                     src="/static/images/beyondpetrochemicalslogo2.png"
                     alt="Beyond Petrochemicals">
            </a>
        </div> {% endcomment %}
    </div>
    <!-- Splash Modal -->
    <div id="splashScreen" class="splash-modal">
        <div class="splash-content">
        <span class="close-button" onclick="closeSplash()" id="closex">&times;</span>
    
        <!-- Main Content Area (changes when tabs are clicked) -->
        <div id="tabContent" class="tab-content" style="overflow-y:auto">
            <h2>Welcome</h2>
            <p>This is the default content shown in the modal.</p>
        </div>
    
        <!-- Tab Buttons -->
        <div class="tab-buttons">
            <button disabled onclick="showTab('tab1')" class="btn" id="btn1" >Terms of Service</button>
            {% comment %} <button onclick="showTab('tab2')">Quick Guide</button> {% endcomment %}
            <button disabled onclick="showTab('tab3')" class="btn" id="btn2" >Data Details</button>
        </div>
    {% comment %} </div> {% endcomment %}
    </div>